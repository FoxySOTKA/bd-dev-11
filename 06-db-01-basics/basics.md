# Домашнее задание к занятию 1. «Типы и структура СУБД»

## Выполнил Савицкий Андрей

### Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определённых данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- электронные чеки в json-виде,
- склады и автомобильные дороги для логистической компании,
- генеалогические деревья,
- кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации,
- отношения клиент-покупка для интернет-магазина.

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

#### Ответ

*Типы СУБД для каждой из сущностей:*
- для электронных чеков в json-виде я бы выбрал **документоориентированные БД** (напртмер CouchDB или же MongoDB) из-за невозможности спрогнозировать схему данных;
- для складов и автомобильных дорог логистической компании я бы выбрал **реляционные SQL БД типа MySQL** со связями между таблицами, либо **графовые БД** (например OrientDB или Neo4j) из-за необходимости установки связей между данными;
- для генеалогических деревьев я бы выбрал тот же подход с **графовыми БД** как в предыдущем варианте для автомобильных дорог и складов логической компании, либо **документо ориетированные БД** с взаимосвязями, что позволит органично выстраивать отношения ребенок-родитель и добавлять дополнительные поля например для дат рождения/смерти;
- для кэш идентификаторов клиентов с ограниченным временем жизни движка аутенфикации я бы выбрал **БД Ключ-Значение** (например Redis, Memcached) из-за возможности устанавливать время жизни кешей, ускорения многих процессов, и их нахождения в оперптивной памяти;
- для отношения клиент-покупка интернет-магазина я бы выбрал **реляционные SQL БД** (например PostgreSQL или MySQL) так как они отлично себя показали в подобных сферах. 


### Задача 2

Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):

- данные записываются на все узлы с задержкой до часа (асинхронная запись);
- при сетевых сбоях система может разделиться на 2 раздельных кластера;
- система может не прислать корректный ответ или сбросить соединение.

Согласно PACELC-теореме как бы вы классифицировали эти реализации?

#### Ответ

*Классификации согласно CAP-теореме, или PACELC-теореме соответствено:*
- асинхронная запись, где данные записываются на все узлы с задержкой до часа => **AP** - доступность и устойчивость к распределению, данные в силу задержки неконсистентны, или **PA/EL** - при наличии сетевого соединения упор идёт на доступность, а при отсутствии на скорость с которой клиент получает ответ;
- при сетевых сбоях система может разделиться на 2 раздельных кластера => **AP** - доступна и устойчива к распределению, но неконсистентна из-за возможности различия данных в отдельных кластерах, или **PA/EL** - 2 раздельных кластера явно ухудшают консистентность в угоду доступности;
- система может не прислать корректный ответ или сбросить соединение => **CP** - система обеспечивает консистентность данных, но теряет доступность в случае когда теряет связь с частью узлов, или **PC/EC** - максимальная консистентность данных, не присылает клиенту ответ в угоду Latency, стараясь максимально приблизиться к парадигме ACID.


### Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

#### Ответ

*Не могут*, потому что эти принципы преследуют разные цели и имеют противоположности в своих основных аспектах. **ACID** консистентна и атомарна в любой момент времени, обеспечивает жизнеспособность транзакций и их изолированность, а **BASE** в свою очередь жертвует этими свойставми в угоду доступности, сохраняя при этом конечную консистентность.

### Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни,
- реакция на истечение таймаута.

Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub. 
Что это за система? Какие минусы выбора этой системы?

#### Ответ



---



